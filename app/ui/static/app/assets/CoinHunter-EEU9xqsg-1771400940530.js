import{a as x,j as e,i as N,C as l,d,e as o,f as n,k as m,M as b,l as k,h as v}from"./index-D9n_fkoQ-1771400940530.js";import{L as _}from"./link-2-BENhIqC4-1771400940530.js";import{E as h}from"./external-link-DEQN88fd-1771400940530.js";function w(a,c=10,r=8){return!a||a.length<=c+r+3?a:`${a.slice(0,c)}...${a.slice(-r)}`}function y(){const{data:a,isLoading:c,error:r}=x({queryKey:["coin-hunter"],queryFn:async()=>{const s=await fetch("/api/coin-hunter");if(!s.ok)throw new Error("Failed to fetch coin hunter leaderboard");return s.json()},refetchInterval:6e4}),{data:t,isLoading:i}=x({queryKey:["leaderboard-verification-feed"],queryFn:async()=>{const s=await fetch("/api/leaderboard/verification-feed?limit=12&accepted_only=true");if(!s.ok)throw new Error("Failed to fetch verification feed");return s.json()},refetchInterval:3e4}),p=s=>s<=3?"border-l-4":"",u=s=>{switch(s){case 1:return"border-l-yellow-500";case 2:return"border-l-gray-400";case 3:return"border-l-orange-500";default:return""}},j=s=>{switch(s){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return null}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(N,{className:"h-8 w-8 text-green-600 dark:text-green-400"}),"Coin Hunter Leaderboard"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"All-time blocks found across all coins with weighted scoring"})]})}),e.jsxs(l,{children:[e.jsx(d,{children:e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:"Scoring System"})}),e.jsx(n,{children:e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"â‚¿"}),e.jsx("span",{children:"BTC"}),e.jsx("span",{className:"text-muted-foreground",children:"1,000 pts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"à¸¿"}),e.jsx("span",{children:"BCH"}),e.jsx("span",{className:"text-muted-foreground",children:"100 pts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"à¸¿â‚‚"}),e.jsx("span",{children:"BC2"}),e.jsx("span",{className:"text-muted-foreground",children:"50 pts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"â—†"}),e.jsx("span",{children:"DGB"}),e.jsx("span",{className:"text-muted-foreground",children:"1 pt"})]})]})})]}),e.jsxs(l,{children:[e.jsxs(d,{children:[e.jsxs(o,{className:"text-base flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"Quick Block Verification"]}),e.jsx(m,{children:"Latest accepted block submissions with direct explorer links."})]}),e.jsxs(n,{children:[i&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading recent accepted blocks..."}),!i&&(!t||t.entries.length===0)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No accepted block submissions yet."}),!i&&t&&t.entries.length>0&&e.jsx("div",{className:"space-y-2",children:t.entries.map(s=>e.jsxs("div",{className:"border rounded-md p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{children:s.coin}),s.template_height!==null&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["height ",s.template_height]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(s.timestamp).toLocaleString()," â€¢ ",s.worker||"unknown worker"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["hash ",w(s.block_hash)]}),s.payout_address&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["payout ",s.payout_address]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.block_explorer_url&&e.jsxs("a",{href:s.block_explorer_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded border hover:bg-muted",children:["Block ",e.jsx(h,{className:"h-3 w-3"})]}),s.payout_explorer_url&&e.jsxs("a",{href:s.payout_explorer_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded border hover:bg-muted",children:["Address ",e.jsx(h,{className:"h-3 w-3"})]})]})]},`${s.source_pool_id}-${s.id}`))})]})]}),c&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-gray-900 dark:border-gray-100 mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading leaderboard..."})]}),r&&e.jsx(l,{children:e.jsx(n,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500",children:"Failed to load leaderboard"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r instanceof Error?r.message:"Unknown error"})]})})}),a&&a.entries.length>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.entries.map(s=>{const f=j(s.rank),g=s.total_blocks>0;return e.jsxs(l,{className:`transition-all hover:shadow-md ${p(s.rank)} ${u(s.rank)}`,children:[e.jsx(d,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl font-bold text-muted-foreground w-12",children:f||`#${s.rank}`}),e.jsxs("div",{children:[e.jsxs(o,{className:"text-base flex items-center gap-2",children:[e.jsx("span",{children:s.miner_name}),e.jsx(b,{type:s.miner_type,size:"sm"})]}),e.jsxs(m,{className:"text-xs flex items-center gap-2 text-muted-foreground",children:[e.jsxs("span",{className:"font-semibold text-foreground",children:[s.total_score.toLocaleString()," pts"]}),e.jsx("span",{"aria-hidden":"true",children:"â€¢"}),e.jsx("span",{children:k(s.miner_type)})]})]})]})})}),e.jsx(n,{children:g?e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.btc_blocks>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-lg",children:"â‚¿"}),e.jsx("span",{className:"font-semibold",children:s.btc_blocks})]}),s.bch_blocks>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-lg",children:"à¸¿"}),e.jsx("span",{className:"font-semibold",children:s.bch_blocks})]}),s.bc2_blocks>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-lg",children:"à¸¿â‚‚"}),e.jsx("span",{className:"font-semibold",children:s.bc2_blocks})]}),s.dgb_blocks>0&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-lg",children:"â—†"}),e.jsx("span",{className:"font-semibold",children:s.dgb_blocks})]}),e.jsxs("div",{className:"ml-auto text-xs text-muted-foreground",children:[s.total_blocks," total"]})]}):e.jsx("div",{className:"text-center py-4 text-sm text-muted-foreground",children:"No blocks found yet"})})]},`${s.miner_id}-${s.rank}`)})}),a&&a.entries.length===0&&e.jsx(l,{children:e.jsx(n,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"h-12 w-12 mx-auto text-muted-foreground/50"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold",children:"No Blocks Found Yet"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Keep mining! Block discoveries will appear here."})]})})})]})}export{y as default};
