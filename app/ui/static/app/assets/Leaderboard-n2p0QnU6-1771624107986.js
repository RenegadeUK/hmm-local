import{c as k,r as m,a as u,j as e,h,C as i,M as y,g as w}from"./index-BduPrBJO-1771624107986.js";import{C as _}from"./calendar-DLmBcZKe-1771624107986.js";import{L as C}from"./link-2-C8aHzWaN-1771624107986.js";import{E as f}from"./external-link-hBhqE06P-1771624107986.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=k("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);function $(t,d=10,a=8){return!t||t.length<=d+a+3?t:`${t.slice(0,d)}...${t.slice(-a)}`}function F(){const[t,d]=m.useState(90),[a,c]=m.useState(null),{data:r,isLoading:g}=u({queryKey:["leaderboard",t,a],queryFn:async()=>{const s=new URLSearchParams({days:t.toString(),limit:"10"});a&&s.append("coin",a);const x=await fetch(`/api/leaderboard?${s}`);if(!x.ok)throw new Error("Failed to fetch leaderboard");return x.json()},refetchInterval:3e4}),{data:l,isLoading:n}=u({queryKey:["leaderboard-verification-feed"],queryFn:async()=>{const s=await fetch("/api/leaderboard/verification-feed?limit=8&accepted_only=true");if(!s.ok)throw new Error("Failed to fetch verification feed");return s.json()},refetchInterval:3e4}),p=s=>{switch(s){case 1:return"ðŸ¥‡";case 2:return"ðŸ¥ˆ";case 3:return"ðŸ¥‰";default:return`#${s}`}},j=s=>s?s.includes("ðŸ’€")||s.includes("Emotional Damage")?"bg-red-500/10 text-red-600 dark:text-red-400 border border-red-500/20":s.includes("ðŸš¨")||s.includes("Pain")?"bg-orange-500/10 text-orange-600 dark:text-orange-400 border border-orange-500/20":s.includes("ðŸ”¥")||s.includes("So Close")?"bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 border border-yellow-500/20":"bg-gray-500/10 text-gray-600 dark:text-gray-400 border border-gray-500/20":"",N=["BTC","BCH","BC2","DGB"],b=[1,7,30,90,180,365],v=(r==null?void 0:r.entries.filter(s=>!s.was_block_solve).length)||0,o=(r==null?void 0:r.entries.filter(s=>s.was_block_solve).length)||0;return g?e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Hall of Pain"}),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading leaderboard..."})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(h,{className:"h-8 w-8 text-yellow-500"}),"Hall of Pain"]}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"The highest difficulty shares submitted"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold",children:v}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"epic fails"}),o>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["+",o," ",o===1?"win":"wins","!"]})]})]}),e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Time Range:"}),e.jsx("div",{className:"flex gap-2",children:b.map(s=>e.jsxs("button",{onClick:()=>d(s),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${t===s?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:[s,"d"]},s))})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsx("span",{className:"text-sm font-medium",children:"Coin:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(null),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${a===null?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:"All"}),N.map(s=>e.jsx("button",{onClick:()=>c(s),className:`px-3 py-1 text-sm font-medium rounded-md transition-colors ${a===s?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground hover:bg-secondary/80"}`,children:s},s))]})]})]})}),e.jsxs(i,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("h2",{className:"text-sm font-semibold",children:"Quick Block Verification"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"latest accepted submissions"})]}),n&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading recent accepted blocks..."}),!n&&(!l||l.entries.length===0)&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"No accepted block submissions yet."}),!n&&l&&l.entries.length>0&&e.jsx("div",{className:"space-y-2",children:l.entries.map(s=>e.jsxs("div",{className:"border rounded-md p-3 flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx("span",{children:s.coin}),s.template_height!==null&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["height ",s.template_height]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[new Date(s.timestamp).toLocaleString()," â€¢ ",s.worker||"unknown worker"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["hash ",$(s.block_hash)]}),s.payout_address&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["payout ",s.payout_address]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.block_explorer_url&&e.jsxs("a",{href:s.block_explorer_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded border hover:bg-muted",children:["Block ",e.jsx(f,{className:"h-3 w-3"})]}),s.payout_explorer_url&&e.jsxs("a",{href:s.payout_explorer_url,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded border hover:bg-muted",children:["Address ",e.jsx(f,{className:"h-3 w-3"})]})]})]},`${s.source_pool_id}-${s.id}`))})]}),e.jsx("div",{className:"space-y-3",children:r==null?void 0:r.entries.map(s=>e.jsx(i,{className:`p-6 transition-all hover:shadow-md ${s.rank===1?"border-l-4 border-l-yellow-500":s.rank===2?"border-l-4 border-l-gray-400":s.rank===3?"border-l-4 border-l-orange-500":""}`,children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex items-center justify-center min-w-[60px]",children:e.jsx("div",{className:"text-3xl font-bold text-muted-foreground",children:s.rank<=3?p(s.rank):`#${s.rank}`})}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.miner_name}),e.jsx(y,{type:s.miner_type,size:"sm"}),s.was_block_solve&&e.jsxs("span",{className:"flex items-center gap-1 text-xs px-2 py-0.5 rounded bg-green-500/10 text-green-600 dark:text-green-400 border border-green-500/20",children:[e.jsx(L,{className:"h-3 w-3"}),"Block Level"]}),s.badge&&e.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-medium ${j(s.badge)}`,children:s.badge})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.pool_name," â€¢ ",s.coin," â€¢ ",s.days_ago,"d ago"]})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Difficulty"}),e.jsx("div",{className:"text-lg font-semibold",children:s.difficulty_formatted})]}),s.percent_of_block!==null&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Of Block"}),e.jsxs("div",{className:"text-lg font-semibold text-orange-600 dark:text-orange-400",children:[s.percent_of_block.toFixed(1),"%"]})]}),s.hashrate!==null&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Hashrate"}),e.jsx("div",{className:"text-lg font-semibold",children:w(s.hashrate,s.hashrate_unit)})]})]}),s.miner_mode&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Mode: ",e.jsx("span",{className:"font-medium text-foreground uppercase",children:s.miner_mode})]})]})]})},s.id))}),(r==null?void 0:r.entries.length)===0&&e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(h,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Epic Fails Yet"}),e.jsx("p",{className:"text-muted-foreground",children:"No high difficulty shares found for the selected time range and coin."})]})]})}export{F as Leaderboard};
