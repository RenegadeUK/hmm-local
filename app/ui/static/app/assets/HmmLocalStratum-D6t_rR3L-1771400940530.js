import{m as ue,r as j,a as C,n as be,j as e,o as ge,W as ie,C as _,d as v,e as f,f as y,L as pe,R as Ne,a1 as D,a2 as de}from"./index-D9n_fkoQ-1771400940530.js";import{C as je}from"./check-circle-2-BGJHWN01-1771400940530.js";import{A as _e}from"./alert-triangle-Cyl-UEgq-1771400940530.js";const ve="hmm_local_stratum";function fe(i){return typeof i!="number"||!Number.isFinite(i)?"N/A":`${i.toFixed(2)}%`}function t(i){return typeof i!="number"||!Number.isFinite(i)?"N/A":new Intl.NumberFormat().format(i)}function ye(i){return typeof i!="number"||!Number.isFinite(i)?"N/A":i>=1024?`${(i/1024).toFixed(2)} GB`:`${i.toFixed(1)} MB`}function ne(i){if(!i)return{label:"Unknown",className:"border-slate-700/50 bg-slate-900/30 text-slate-300"};const b=new Date(i).getTime();if(Number.isNaN(b))return{label:"Unknown",className:"border-slate-700/50 bg-slate-900/30 text-slate-300"};const h=Math.max(0,Math.floor((Date.now()-b)/1e3));return h<=60?{label:"Fresh",className:"border-emerald-700/50 bg-emerald-900/30 text-emerald-300"}:h<=180?{label:"Aging",className:"border-amber-700/60 bg-amber-900/30 text-amber-300"}:{label:"Stale",className:"border-red-700/60 bg-red-900/30 text-red-300"}}function ke(i){return typeof i!="number"||!Number.isFinite(i)?{label:"Unknown",className:"border-slate-700/50 bg-slate-900/30 text-slate-300"}:i>=5?{label:"High",className:"border-red-700/60 bg-red-900/30 text-red-300"}:i>=3?{label:"Elevated",className:"border-amber-700/60 bg-amber-900/30 text-amber-300"}:{label:"Normal",className:"border-emerald-700/50 bg-emerald-900/30 text-emerald-300"}}function A(i){if(!i)return"Unknown";const b=new Date(i).getTime();if(Number.isNaN(b))return i;const h=Math.max(0,Math.floor((Date.now()-b)/1e3));if(h<60)return`${h}s ago`;const g=Math.floor(h/60);if(g<60)return`${g}m ago`;const p=Math.floor(g/60);return p<24?`${p}h ago`:`${Math.floor(p/24)}d ago`}function Ae(){var $,R,W;const i=ue(),[b,h]=j.useState(!1),[g,p]=j.useState(null),k=C({queryKey:["integrations","hmm-local-stratum","settings"],queryFn:()=>D.getHmmLocalStratumSettings(),staleTime:3e4});j.useEffect(()=>{var a;typeof((a=k.data)==null?void 0:a.enabled)=="boolean"&&h(k.data.enabled)},[($=k.data)==null?void 0:$.enabled]);const M=be({mutationFn:()=>D.saveHmmLocalStratumSettings(b),onSuccess:a=>{p({tone:"success",message:a.message||"Settings saved"}),i.invalidateQueries({queryKey:["integrations","hmm-local-stratum","settings"]}),i.invalidateQueries({queryKey:["layout","stratum-dashboards-enabled"]}),setTimeout(()=>p(null),3500)},onError:a=>{p({tone:"error",message:a.message||"Failed to save settings"}),setTimeout(()=>p(null),3500)}}),q=C({queryKey:["integrations","hmm-local-stratum","tiles"],queryFn:()=>de.getPoolTiles(),refetchInterval:3e4,refetchOnWindowFocus:!1,staleTime:25e3}),T=C({queryKey:["integrations","hmm-local-stratum","recovery-status"],queryFn:()=>de.getRecoveryStatus(24),refetchInterval:3e4,refetchOnWindowFocus:!1,staleTime:25e3}),S=C({queryKey:["integrations","hmm-local-stratum","operational"],queryFn:()=>D.getHmmLocalStratumOperational(),refetchInterval:3e4,refetchOnWindowFocus:!1,staleTime:25e3}),N=j.useMemo(()=>Object.values(q.data||{}).filter(a=>a.pool_type===ve),[q.data]),L=j.useMemo(()=>{var m;const a=new Map;for(const c of((m=T.data)==null?void 0:m.pools)||[])a.set(String(c.pool_id),c);return a},[(R=T.data)==null?void 0:R.pools]),ce=j.useMemo(()=>{var m,c,r;const a=new Map;for(const s of((m=S.data)==null?void 0:m.pools)||[])((c=s.pool)==null?void 0:c.id)!==null&&((r=s.pool)==null?void 0:r.id)!==void 0&&a.set(String(s.pool.id),s);return a},[(W=S.data)==null?void 0:W.pools]),F=j.useMemo(()=>{const a=N.filter(s=>s.tile_1_health.health_status===!1).length,m=N.reduce((s,d)=>{const n=L.get(String(d.pool_id));return s.recovered+=(n==null?void 0:n.recovered_count)||0,s.unresolved+=(n==null?void 0:n.unresolved_count)||0,s},{recovered:0,unresolved:0}),c=N.filter(s=>ne(s.last_updated).label==="Stale").length,r=N.reduce((s,d)=>{var n;return s+(((n=d.warnings)==null?void 0:n.length)||0)},0);return{unhealthyPools:a,staleFeeds:c,driverWarnings:r,recovered:m.recovered,unresolved:m.unresolved}},[L,N]);return q.isLoading?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ge,{className:"h-8 w-8 animate-spin text-blue-500"})}):q.isError?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-3xl font-semibold text-foreground",children:[e.jsx(ie,{className:"h-8 w-8 text-blue-400"}),e.jsx("span",{children:"HMM-Local Stratum"})]}),e.jsx("div",{className:"rounded-lg border border-red-700 bg-red-900/30 p-4 text-red-200",children:"Failed to load Stratum operational data."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3 text-3xl font-semibold text-foreground",children:[e.jsx(ie,{className:"h-8 w-8 text-blue-400"}),e.jsx("span",{children:"HMM-Local Stratum"})]}),e.jsx("p",{className:"text-base text-muted-foreground",children:"Dedicated operational status view for local Stratum integration pools."})]}),g&&e.jsx("div",{className:`rounded-lg border px-4 py-3 text-sm ${g.tone==="success"?"border-emerald-700/60 bg-emerald-900/30 text-emerald-200":g.tone==="error"?"border-red-700/60 bg-red-900/30 text-red-200":"border-blue-700/60 bg-blue-900/30 text-blue-200"}`,children:g.message}),e.jsxs(_,{children:[e.jsx(v,{children:e.jsx(f,{children:"HMM-Local Stratum dashboards"})}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 rounded-lg border border-slate-700/50 bg-slate-900/30 p-3",children:[e.jsx("input",{type:"checkbox",className:"mt-0.5 h-4 w-4",checked:b,onChange:a=>h(a.target.checked),disabled:k.isLoading||M.isPending}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-100",children:"Enable dedicated HMM-Local Stratum dashboards"}),e.jsx("div",{className:"text-xs text-slate-400",children:"When enabled, a new top-level navigation section appears with BTC, BCH and DGB pages focused on mining pool data."})]})]}),e.jsx("button",{type:"button",className:"inline-flex items-center rounded-md border border-blue-700/60 bg-blue-900/30 px-3 py-2 text-sm text-blue-200 hover:bg-blue-900/40 disabled:opacity-50",onClick:()=>M.mutate(),disabled:M.isPending||k.isLoading,children:M.isPending?"Saving…":"Save setting"})]})]}),N.length===0?e.jsxs(_,{children:[e.jsx(v,{children:e.jsx(f,{children:"No HMM-Local Stratum pool configured"})}),e.jsxs(y,{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Add or update a pool with driver ",e.jsx("span",{className:"font-semibold text-foreground",children:"hmm_local_stratum"})," to populate this page."]}),e.jsx("div",{children:e.jsx(pe,{className:"text-blue-400 hover:text-blue-300 underline",to:"/pools",children:"Go to Pools"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxs(_,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(f,{className:"text-sm text-muted-foreground",children:"Configured pools"})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-3xl font-semibold",children:N.length}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[F.unhealthyPools," degraded"]})]})]}),e.jsxs(_,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(f,{className:"text-sm text-muted-foreground",children:"Data freshness risk"})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-3xl font-semibold",children:F.staleFeeds}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Stale feeds (> 3m old)"})]})]}),e.jsxs(_,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(f,{className:"text-sm text-muted-foreground",children:"Driver warnings"})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-3xl font-semibold",children:F.driverWarnings}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Unresolved / not-loaded flags"})]})]}),e.jsxs(_,{children:[e.jsx(v,{className:"pb-2",children:e.jsx(f,{className:"text-sm text-muted-foreground",children:"Driver recoveries (24h)"})}),e.jsxs(y,{children:[e.jsx("div",{className:"text-3xl font-semibold",children:F.recovered}),e.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:[F.unresolved," unresolved"]})]})]})]}),e.jsx("div",{className:"space-y-4",children:N.map(a=>{var z,G,V,Y,J,X,Z,H,ee,se,te,ae,le;const m=String(a.pool_id),c=L.get(m),r=ce.get(m),s=(z=r==null?void 0:r.stats)==null?void 0:z.datastore,d=r==null?void 0:r.database,n=d==null?void 0:d.pool,u=d==null?void 0:d.postgresql,x=(G=d==null?void 0:d.high_water_marks)==null?void 0:G.last_24h,o=(V=d==null?void 0:d.high_water_marks)==null?void 0:V.since_boot,w=String(a.tile_4_blocks.currency||"").toUpperCase(),l=w?(J=(Y=r==null?void 0:r.stats)==null?void 0:Y.coins)==null?void 0:J[w]:void 0,E=Number((s==null?void 0:s.total_write_batches_ok)||0),xe=Number((s==null?void 0:s.total_write_batches_failed)||0),Q=E+xe,U=Q>0?E/Q*100:null,I=Number((l==null?void 0:l.shares_accepted)||0),oe=Number((l==null?void 0:l.shares_rejected)||0),O=I+oe,K=O>0?I/O*100:null,me=Number((l==null?void 0:l.block_candidates)||0),he=Number((l==null?void 0:l.blocks_rejected)||0),P=ne(a.last_updated),B=ke(a.tile_3_shares.reject_rate);return e.jsxs(_,{children:[e.jsxs(v,{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx(f,{className:"text-lg",children:a.display_name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-slate-700 bg-slate-900/60 px-2 py-1 text-slate-300",children:[e.jsx(Ne,{className:"h-3 w-3"})," Updated ",A(a.last_updated)]}),e.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full border px-2 py-1 ${P.className}`,children:["Feed ",P.label]}),a.tile_1_health.health_status?e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-700/50 bg-emerald-900/30 px-2 py-1 text-emerald-300",children:[e.jsx(je,{className:"h-3 w-3"})," Healthy"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-700/60 bg-amber-900/30 px-2 py-1 text-amber-300",children:[e.jsx(_e,{className:"h-3 w-3"})," Degraded"]})]})]}),(a.warnings||[]).length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:(a.warnings||[]).map(re=>e.jsx("span",{className:"inline-flex rounded-full border border-amber-700/60 bg-amber-900/30 px-2 py-1 text-xs text-amber-300",children:re},`${a.pool_id}-${re}`))})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Service health"}),e.jsx("div",{className:"mt-1 text-sm text-slate-100",children:a.tile_1_health.health_message||"No message"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Latency: ",a.tile_1_health.latency_ms??"N/A"," ms"]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Operational info (/stats)"}),S.isLoading?e.jsx("div",{className:"mt-1 text-sm text-slate-300",children:"Loading operational stats…"}):S.isError?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 text-sm text-amber-300",children:"Unavailable"}),e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:((X=S.error)==null?void 0:X.message)||"Operational query failed"})]}):(r==null?void 0:r.status)!=="ok"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-1 text-sm text-amber-300",children:"Unavailable"}),e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:(r==null?void 0:r.error)||"No response from Stratum API"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-1 text-sm text-slate-100",children:["Queue: ",t(s==null?void 0:s.queue_depth)," / max seen ",t(s==null?void 0:s.max_queue_depth_seen)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Rows written: ",t(s==null?void 0:s.total_rows_written)," · Dropped: ",t(s==null?void 0:s.total_dropped)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Batches ok/fail: ",t(s==null?void 0:s.total_write_batches_ok)," / ",t(s==null?void 0:s.total_write_batches_failed)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Enqueued: ",t(s==null?void 0:s.total_enqueued)," · Spooled/Replayed: ",t(s==null?void 0:s.total_spooled_rows)," / ",t(s==null?void 0:s.total_replayed_rows)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Retries: ",t(s==null?void 0:s.total_retries)," · Consecutive failures: ",t(s==null?void 0:s.consecutive_write_failures)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Last write: ",A((s==null?void 0:s.last_write_ok_at)||null)," · Latency: ",((Z=s==null?void 0:s.last_write_latency_ms)==null?void 0:Z.toFixed(2))??"N/A"," ms"]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["DB: ",(H=r.stats)!=null&&H.db_enabled?"enabled":"disabled"," · Datastore: ",s!=null&&s.enabled?"enabled":"disabled"]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Retention (d): H ",t(s==null?void 0:s.hashrate_retention_days)," · N ",t(s==null?void 0:s.network_retention_days)," · K ",t(s==null?void 0:s.kpi_retention_days)]}),(s==null?void 0:s.spool_path)&&e.jsxs("div",{className:"truncate text-xs text-slate-500",title:s.spool_path,children:["Spool path: ",s.spool_path]})]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Quality / reliability"}),e.jsx("div",{className:"mt-1 flex items-center gap-2",children:e.jsxs("span",{className:`inline-flex rounded-full border px-2 py-1 text-xs ${B.className}`,children:["Reject risk: ",B.label]})}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Reject rate: ",fe(a.tile_3_shares.reject_rate)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Valid ",a.tile_3_shares.shares_valid??"N/A"," · Invalid ",a.tile_3_shares.shares_invalid??"N/A"]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-400",children:"Driver recovery (24h)"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-100",children:["Recovered: ",(c==null?void 0:c.recovered_count)||0]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Unresolved: ",(c==null?void 0:c.unresolved_count)||0]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["Last event: ",c!=null&&c.last_event_at?A(c.last_event_at):"None"]})]})]}),(r==null?void 0:r.status)==="ok"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Queue pressure"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:t(s==null?void 0:s.queue_depth)}),e.jsxs("div",{className:"text-xs text-slate-400",children:["max seen ",t(s==null?void 0:s.max_queue_depth_seen)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["dropped ",t(s==null?void 0:s.total_dropped)," · retries ",t(s==null?void 0:s.total_retries)]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Write reliability"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:U!==null?`${U.toFixed(1)}%`:"N/A"}),e.jsxs("div",{className:"text-xs text-slate-400",children:["ok/fail ",t(s==null?void 0:s.total_write_batches_ok)," / ",t(s==null?void 0:s.total_write_batches_failed)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["last write ",A((s==null?void 0:s.last_write_ok_at)||null)," · ",((ee=s==null?void 0:s.last_write_latency_ms)==null?void 0:ee.toFixed(1))??"N/A"," ms"]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsxs("div",{className:"text-xs text-slate-400",children:["Share pipeline",w?` (${w})`:""]}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:K!==null?`${K.toFixed(1)}%`:"N/A"}),e.jsx("div",{className:"text-xs text-slate-400",children:"accept rate"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["accepted ",t(l==null?void 0:l.shares_accepted)," · rejected ",t(l==null?void 0:l.shares_rejected)]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["workers ",t(l==null?void 0:l.connected_workers)," · last share ",A((l==null?void 0:l.last_share_at)||null)]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsxs("div",{className:"text-xs text-slate-400",children:["Block pipeline",w?` (${w})`:""]}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:t(l==null?void 0:l.blocks_accepted)}),e.jsx("div",{className:"text-xs text-slate-400",children:"accepted by node"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["candidates ",t(me)," · rejected ",t(he)]}),e.jsxs("div",{className:"text-xs text-slate-400 truncate",title:(l==null?void 0:l.last_block_submit_result)||"",children:["last result ",(l==null?void 0:l.last_block_submit_result)||"N/A"]})]})]}),e.jsxs("div",{className:"border-t border-slate-700/60 pt-4",children:[e.jsx("div",{className:"mb-3 text-xs uppercase tracking-wide text-slate-400",children:"Stratum DB health"}),(r==null?void 0:r.database_status)!=="ok"?e.jsxs("div",{className:"rounded-lg border border-amber-700/60 bg-amber-900/30 p-3 text-xs text-amber-300",children:["Unavailable: ",(r==null?void 0:r.database_error)||"No DB health response"]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Connection Pool"}),e.jsxs("div",{className:"mt-1 flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-xl font-semibold text-slate-100",children:[((se=n==null?void 0:n.utilization_percent)==null?void 0:se.toFixed(1))??"N/A","%"]}),e.jsx("span",{className:"text-xs text-slate-400",children:"utilized"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:[t(n==null?void 0:n.checked_out),"/",t(n==null?void 0:n.total_capacity)," (",t((n==null?void 0:n.max_capacity_configured)??(n==null?void 0:n.total_capacity))," max)"]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Active Queries"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:t(u==null?void 0:u.active_connections)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:["Slow (>1m): ",t(u==null?void 0:u.long_running_queries)]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Database Size"}),e.jsx("div",{className:"mt-1 text-xl font-semibold text-slate-100",children:ye(u==null?void 0:u.database_size_mb)}),e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:"total storage"})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"Health Status"}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center rounded-full border px-2 py-1 text-xs ${(d==null?void 0:d.status)==="healthy"?"border-emerald-700/50 bg-emerald-900/30 text-emerald-300":(d==null?void 0:d.status)==="warning"?"border-amber-700/60 bg-amber-900/30 text-amber-300":"border-red-700/60 bg-red-900/30 text-red-300"}`,children:((d==null?void 0:d.status)||"unknown").toUpperCase()})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"High-water marks (last 24h)"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Since ",((te=d==null?void 0:d.high_water_marks)==null?void 0:te.last_24h_date)||"N/A"]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-300",children:[e.jsxs("div",{children:["Pool peak: ",t(x==null?void 0:x.db_pool_in_use_peak)]}),e.jsxs("div",{children:["Active peak: ",t(x==null?void 0:x.active_queries_peak)]}),e.jsxs("div",{children:["Wait count: ",t(x==null?void 0:x.db_pool_wait_count)]}),e.jsxs("div",{children:["Wait sec: ",((ae=x==null?void 0:x.db_pool_wait_seconds_sum)==null?void 0:ae.toFixed(1))??"N/A","s"]}),e.jsxs("div",{children:["Slow queries: ",t(x==null?void 0:x.slow_queries_peak)]})]})]}),e.jsxs("div",{className:"rounded-lg border border-slate-700/60 bg-slate-900/40 p-3",children:[e.jsx("div",{className:"text-xs text-slate-400",children:"High-water marks (since boot)"}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs text-slate-300",children:[e.jsxs("div",{children:["Pool peak: ",t(o==null?void 0:o.db_pool_in_use_peak)]}),e.jsxs("div",{children:["Active peak: ",t(o==null?void 0:o.active_queries_peak)]}),e.jsxs("div",{children:["Wait count: ",t(o==null?void 0:o.db_pool_wait_count)]}),e.jsxs("div",{children:["Wait sec: ",((le=o==null?void 0:o.db_pool_wait_seconds_sum)==null?void 0:le.toFixed(1))??"N/A","s"]}),e.jsxs("div",{children:["Slow queries: ",t(o==null?void 0:o.slow_queries_peak)]})]})]})]})]})]})]})]},a.pool_id)})})]})]})}export{Ae as default};
